# 完整电池数据集结构说明

该数据集源自论文《Data-driven prediction of battery cycle life before capacity degradation》（Nature Energy, 2019），包含124节商用LFP/石墨锂离子电池（A123 Systems APR18650M1A，标称容量1.1 Ah）的快充循环数据。数据通过实验室实验生成，使用不同的快充策略（72种，平均充电率3.6C至6C，放电统一为4C至2.0V），环境温度控制在30°C，周期寿命定义为容量衰减至标称容量的80%时的循环次数（范围150-2300次）。

原始数据以MATLAB .mat文件格式存储（例如，2017-05-12_batchdata_updated_struct_errorcorrect.mat等批次文件），每个.mat文件包含一个名为"batch"的结构体。使用Python加载（例如，通过scipy.io.loadmat）后，转换为嵌套字典结构（如您的trainData）。数据是树形层次化的：根级别为电池ID，子级别包括全局信息、汇总统计和实时序列。数据已预处理，包括线性插值以统一不同循环的电压-容量曲线，便于跨循环比较和特征提取（如论文中的ΔQ(V) = Q100(V) - Q10(V)）。

以下是详细结构描述，包括层次、字段含义、数据类型、典型shape/维度（基于论文和常见代码实现，如GitHub仓库rdbraatz/data-driven-prediction-of-battery-cycle-life-before-capacity-degradation中的加载示例；维度可能因具体电池而异，但固定插值网格通常为1000点）、单位和注意事项。单位基于论文推断：容量(Ah)、电压(V)、电流(A)、温度(°C)、时间(s)、内阻(Ω)。所有数组通常为NumPy数组（float64类型）。

## 1. 根级别：数据集整体（trainData）

- **类型**：字典（dict）
- **键**：电池唯一标识（str），如'b1c1'、'b1c3'等（总计124个，分为batch1、batch2、batch3；您的打印显示了部分，如'b1c1'到'b2c45'）。
- **含义**：每个键对应一节电池的完整数据。电池ID中的'b'表示批次（batch），'c'表示对应的电池（cell）。
- **shape/维度**：N/A（字典，无固定维度）。
- **注意**：数据集分为训练/测试集，论文中，batch1和batch2用于模型开发，batch3为额外测试。数据总循环约96,700次。

## 2. 电池级别：单个电池数据（e.g., trainData['b1c1']）

- **类型**：字典（dict）
- **键**：'Vdlin'、'cycle_life'、'charge_policy'、'summary'、'cycles'（您的打印确认）。
- **含义**：存储该电池的全局属性、汇总统计和逐循环实时数据。
- **shape/维度**：N/A（字典）。
- **注意**：所有电池数据独立，但充电策略（charge_policy）不同，导致寿命变异大。预处理包括错误校正（如论文提到的内部电阻测量问题）和插值。

### 2.1 'cycle_life'

- **类型**：浮点数（float）或整数（int），标量。
- **含义**：电池的总循环寿命，即容量衰减至标称容量80%前的循环次数（论文定义的end of life）。范围150-2300，平均806±377。
- **shape/维度**：标量 (1,1)。需要reshahpe到1维
- **单位**：无（循环次数）。
- **注意**：论文模型预测log(cycle_life)。在数据中，可能为[[cycle_life]]的双层数组（MATLAB遗留），加载后展平为标量。

### 2.2 'charge_policy'

- **类型**：字符串（str）。
- **含义**：该电池的充电策略，例如'6C(80%)-3.6C'（表示先以6C充电至80% SOC，然后以3.6C充电至满）。论文中有72种变体，探索快充参数空间。
- **shape/维度**：标量。
- **单位**：无。
- **注意**：有时有'policy_readable'作为别名。放电策略统一为4C（4.4A）至2.0V。C-rate基于1C=1.1A。

### 2.3 'summary'

- **类型**：字典（dict）。
- **键**：'IR'、'QC'、'QD'、'Tavg'、'Tmin'、'Tmax'、'chargetime'、'cycle'（您的打印为'chargetime'，MD为'charge_time'，可能别名）。
- **含义**：每个循环的汇总统计指标。用于快速分析容量衰减、温度等趋势（如论文Fig.1的容量曲线）。
- **shape/维度**：N/A（字典），但每个值是数组，长度≈cycle_life（典型800-2000，根据电池寿命）。
- **注意**：循环索引从1开始（'cycle'字段）。这些是单循环聚合值，便于机器学习特征提取（如容量在cycle 100 vs cycle 2的比率）。

  - **'cycle'**：

    - 含义：循环序号。
    - 类型：浮点数组（np.ndarray, float64）。
    - shape：(num_cycles,)，e.g., [1, 2, 3, ..., 1857]。
    - 单位：无。
  - **'IR'**：

    - 含义：循环结束后的内部电阻（通过脉冲测量）。
    - 类型：浮点数组。
    - shape：(num_cycles,)。
    - 单位：Ω（欧姆）。
    - 注意：可能有噪声或缺失（论文提到一些温度探针问题导致排除）。
  - **'QC'**：

    - 含义：该循环的充电容量（总充入电量）。
    - 类型：浮点数组。
    - shape：(num_cycles,)。
    - 单位：Ah（安培小时）。
    - 注意：接近标称1.1Ah，早周期可能略高。
  - **'QD'**：

    - 含义：该循环的放电容量（总放出电量，用于寿命定义）。
    - 类型：浮点数组。
    - shape：(num_cycles,)。
    - 单位：Ah。
    - 注意：论文Fig.1基于此，早100周期衰减<0.2%。
  - **'Tavg'**：

    - 含义：循环中平均电池壳温度。
    - 类型：浮点数组。
    - shape：(num_cycles,)。
    - 单位：°C。
    - 注意：环境30°C，但快充下可变高10°C（论文Supplementary Fig.3）。
  - **'Tmin'**：

    - 含义：循环中最低温度。
    - 类型：浮点数组。
    - shape：(num_cycles,)。
    - 单位：°C。
  - **'Tmax'**：

    - 含义：循环中最高温度。
    - 类型：浮点数组。
    - shape：(num_cycles,)。
    - 单位：°C。
  - **'chargetime'**：

    - 含义：该循环的充电时长。
    - 类型：浮点数组。
    - shape：(num_cycles,)。
    - 单位：s（秒）。
    - 注意：快充下~10分钟（600s）。

### 2.4 'cycles'

- **类型**：字典（dict）。
- **键**：字符串循环索引，如'0'、'1'、...、'2158'（您的打印显示从'0'开始，数量≈cycle_life，可能包括形成周期）。
- **含义**：每个循环的实时时间序列数据（连续测量，采样率未指定，但典型每秒或更高）。用于详细分析电压曲线、温度变化等（如论文Fig.2的Q(V)）。
- **shape/维度**：N/A（字典），每个值是字典，内部数组长度num_points因循环而异（典型数百到数千点，取决于时长）。
- **注意**：循环从'0'索引（可能为第一个测试循环）。充电-放电全过程数据。电流'I'在充电>0，放电<0。

  - **每个循环的子字典（e.g., trainData['b1c1']['cycles']['0']）**：
    - 'I'：

      - 含义：实时电流。
      - 类型：浮点数组。
      - shape：(num_points,)。
      - 单位：A。
    - 'Qc'：

      - 含义：从循环开始的累积充电容量。
      - 类型：浮点数组。
      - shape：(num_points,)。
      - 单位：Ah。
    - 'Qd'：

      - 含义：从循环开始的累积放电容量。
      - 类型：浮点数组。
      - shape：(num_points,)。
      - 单位：Ah。
    - 'V'：

      - 含义：实时端电压。
      - 类型：浮点数组。
      - shape：(num_points,)。
      - 单位：V（范围2.0-3.6V）。
    - 'T'：

      - 含义：实时电池壳温度（通过热电偶测量）。
      - 类型：浮点数组。
      - shape：(num_points,)。
      - 单位：°C。
    - 't'：

      - 含义：从循环开始的相对时间戳。
      - 类型：浮点数组。
      - shape：(num_points,)。
      - 单位：s。
    - 'dQdV'：

      - 含义：放电过程中的容量-电压微分（dQ/dV，用于分析电化学变化，如SEI生长）。
      - 类型：浮点数组。
      - shape：(num_points,) 或固定长度（取决于计算）。
      - 单位：Ah/V。
      - 注意：可能仅在放电段计算。
    - 'Qdlin'：

      - 含义：放电容量的线性插值数据（将Qd插值到统一电压网格，便于跨循环比较Q(V)）。
      - 类型：浮点数组。
      - shape：(1000,)（固定，基于论文常见实现：np.linspace(3.4, 2.0, 1000) 或类似）。
      - 单位：Ah。
      - 注意：用于计算ΔQ(V)特征（论文Fig.2）。插值网格统一所有循环。
    - 'Tdlin'：

      - 含义：温度的线性插值数据（将T插值到同一电压/容量网格）。
      - 类型：浮点数组。
      - shape：(1000,)。
      - 单位：°C。
      - 注意：与'Qdlin'对齐，用于温度-容量分析。

### 2.5 'Vdlin'

- **类型**：浮点数组（np.ndarray）。
- **含义**：放电电压的线性插值数据（将每个循环的电压V插值到统一容量Q网格，便于跨循环比较V(Q)）。
- **shape/维度**：(1000, num_cycles)（行：固定容量点，列：循环）。
- **单位**：V。
- **注意**：电池级别汇总，便于矩阵操作。与'Qdlin'互补（Q(V) vs V(Q)）。固定网格如np.linspace(0, 1.1, 1000) Ah。用于高级特征提取，但论文重点在Q(V)。

## 附加注意

- **数据预处理**：数据已校正错误（如内阻）。插值使用线性方法统一网格（论文方法部分）。早周期容量可能略增（论文Fig.1c，归因于负极过挂）。
- **使用示例**：在机器学习中，从早100周期提取特征（如var(ΔQ100-10(V))，相关系数-0.93）。代码加载：from scipy.io import loadmat; data = loadmat(file)['batch']。
- **局限**：一些电池有缺失数据（e.g., 温度探针脱落，论文排除4个）。无图像/多媒体，仅数值。
- **来源扩展**：完整数据集在matr.io下载（.mat文件），Kaggle有Python版本。GitHub仓库有加载脚本，确认了上述结构。

如果需要特定电池的示例数据或代码片段，请提供更多细节！
